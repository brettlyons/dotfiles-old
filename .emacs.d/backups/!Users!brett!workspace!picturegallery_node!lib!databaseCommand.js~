require('dotenv').load(); // required for process.env.MONGOLAB_URI
var db = require('monk')(process.env.MONGOLAB_URI);
var pictureDb = db.get('pictures');
var userDb = db.get('users');
var commentDb = db.get('comments');

// all of these return Promises

module.exports = {
  getAllPictures: function () {
    return (pictureDb.find({}));
  },

  getOnePicture: function (id) {
    return (pictureDb.findOne({id}));
  },
  
  addComment: function (pictureId, authorId, comment) {
    return (commentDb.insert({
      pictureId: pictureId,
      authorId: authorId,
      comment: comment
    }));
  },
  
  getCommentsForPictureId: function (pictureId) {
    // the way this is called, is it should return an ARRAY of comments to be iterated over in the view
    return (commentDb.find({ pictureId: pictureId }));
    // well that was easy
  },

  addNewPicture: function (filepath) {
    return (pictureDb.insert({filepath: filepath}));
  },

  addNewU
 
}
